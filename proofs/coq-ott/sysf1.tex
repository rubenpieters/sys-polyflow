% generated by Ott 0.31 from: sysf1.ott
\documentclass[11pt]{article}
\usepackage{amsmath,amssymb}
\usepackage{supertabular}
\usepackage{geometry}
\usepackage{ifthen}
\usepackage{alltt}%hack
\geometry{a4paper,dvips,twoside,left=22.5mm,right=22.5mm,top=20mm,bottom=30mm}
\usepackage{color}
\newcommand{\ottdrule}[4][]{{\displaystyle\frac{\begin{array}{l}#2\end{array}}{#3}\quad\ottdrulename{#4}}}
\newcommand{\ottusedrule}[1]{\[#1\]}
\newcommand{\ottpremise}[1]{ #1 \\}
\newenvironment{ottdefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]}{}
\newenvironment{ottfundefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]\begin{displaymath}\begin{array}{l}}{\end{array}\end{displaymath}}
\newcommand{\ottfunclause}[2]{ #1 \equiv #2 \\}
\newcommand{\ottnt}[1]{\mathit{#1}}
\newcommand{\ottmv}[1]{\mathit{#1}}
\newcommand{\ottkw}[1]{\mathbf{#1}}
\newcommand{\ottsym}[1]{#1}
\newcommand{\ottcom}[1]{\text{#1}}
\newcommand{\ottdrulename}[1]{\textsc{#1}}
\newcommand{\ottcomplu}[5]{\overline{#1}^{\,#2\in #3 #4 #5}}
\newcommand{\ottcompu}[3]{\overline{#1}^{\,#2<#3}}
\newcommand{\ottcomp}[2]{\overline{#1}^{\,#2}}
\newcommand{\ottgrammartabular}[1]{\begin{supertabular}{llcllllll}#1\end{supertabular}}
\newcommand{\ottmetavartabular}[1]{\begin{supertabular}{ll}#1\end{supertabular}}
\newcommand{\ottrulehead}[3]{$#1$ & & $#2$ & & & \multicolumn{2}{l}{#3}}
\newcommand{\ottprodline}[6]{& & $#1$ & $#2$ & $#3 #4$ & $#5$ & $#6$}
\newcommand{\ottfirstprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottlongprodline}[2]{& & $#1$ & \multicolumn{4}{l}{$#2$}}
\newcommand{\ottfirstlongprodline}[2]{\ottlongprodline{#1}{#2}}
\newcommand{\ottbindspecprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottprodnewline}{\\}
\newcommand{\ottinterrule}{\\[5.0mm]}
\newcommand{\ottafterlastrule}{\\}
\newcommand{\ottmetavars}{
\ottmetavartabular{
 $ \ottmv{typevar} ,\, \ottmv{X} ,\, \ottmv{Y} $ & \ottcom{type variables} \\
 $ \ottmv{termvar} ,\, \ottmv{x} ,\, \ottmv{y} $ & \ottcom{term variables} \\
}}

\newcommand{\otttyp}{
\ottrulehead{\ottnt{typ}  ,\ \ottnt{T}  ,\ \ottnt{S}}{::=}{\ottcom{types}}\ottprodnewline
\ottfirstprodline{|}{\ottmv{X}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{Top}}{}{}{}{\ottcom{top type}}\ottprodnewline
\ottprodline{|}{\ottnt{T_{{\mathrm{1}}}}  \rightarrow  \ottnt{T_{{\mathrm{2}}}}}{}{}{}{\ottcom{function types}}\ottprodnewline
\ottprodline{|}{\ottkw{Forall} \, \ottmv{X}  \ottsym{<:}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{.}  \ottnt{T_{{\mathrm{2}}}}}{}{\textsf{bind}\; \ottmv{X}\; \textsf{in}\; \ottnt{T_{{\mathrm{2}}}}}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{True}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{False}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{T_{{\mathrm{1}}}} \, \ottkw{Or} \, \ottnt{T_{{\mathrm{2}}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{T}  \ottsym{[}  \ottmv{X}  \leadsto  \ottnt{T_{{\mathrm{1}}}}  \ottsym{]}} {\textsf{M}}{}{}{}}

\newcommand{\ottexp}{
\ottrulehead{\ottnt{exp}  ,\ \ottnt{e}  ,\ \ottnt{v}}{::=}{\ottcom{expressions}}\ottprodnewline
\ottfirstprodline{|}{\ottmv{x}}{}{}{}{\ottcom{variables}}\ottprodnewline
\ottprodline{|}{ \lambda \ottmv{x} . \ottnt{e} }{}{\textsf{bind}\; \ottmv{x}\; \textsf{in}\; \ottnt{e}}{}{\ottcom{abstractions}}\ottprodnewline
\ottprodline{|}{\lambda  \ottmv{X}  \ottsym{<:}  \ottnt{T}  \ottsym{.}  \ottnt{e}}{}{\textsf{bind}\; \ottmv{X}\; \textsf{in}\; \ottnt{e}}{}{\ottcom{type abstraction}}\ottprodnewline
\ottprodline{|}{\ottnt{e}  \ottsym{[}  \ottnt{T}  \ottsym{]}}{}{}{}{\ottcom{type applications}}\ottprodnewline
\ottprodline{|}{\ottnt{e_{{\mathrm{1}}}} \, \ottnt{e_{{\mathrm{2}}}}}{}{}{}{\ottcom{applications}}\ottprodnewline
\ottprodline{|}{\ottkw{true}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{false}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{if} \, \ottnt{e_{{\mathrm{1}}}} \, \ottkw{then} \, \ottnt{e_{{\mathrm{2}}}} \, \ottkw{else} \, \ottnt{e_{{\mathrm{3}}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{e_{{\mathrm{1}}}}  \ottsym{==}  \ottnt{e_{{\mathrm{2}}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{e_{{\mathrm{1}}}} \, \ottkw{and} \, \ottnt{e_{{\mathrm{2}}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{e_{{\mathrm{1}}}}  \ottsym{[}  \ottmv{x}  \leadsto  \ottnt{e_{{\mathrm{2}}}}  \ottsym{]}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{e}  \ottsym{[}  \ottmv{X}  \leadsto  \ottnt{T}  \ottsym{]}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{e}  \ottsym{)}} {\textsf{S}}{}{}{}}

\newcommand{\ottbinding}{
\ottrulehead{\ottnt{binding}  ,\ \ottnt{b}}{::=}{\ottcom{bindings}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{bind\_typ} \, \ottnt{T}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{bind\_sub} \, \ottnt{T}}{}{}{}{}}

\newcommand{\ottctx}{
\ottrulehead{\ottnt{ctx}  ,\ \Gamma}{::=}{\ottcom{typing context}}\ottprodnewline
\ottfirstprodline{|}{ \bullet }{}{}{}{\ottcom{empty context}}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{T}}{}{}{}{\ottcom{type binding}}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{,}  \ottmv{X}  \ottsym{<:}  \ottnt{T}}{}{}{}{\ottcom{subtype binding}}}

\newcommand{\ottterminals}{
\ottrulehead{\ottnt{terminals}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \lambda }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \longrightarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Longrightarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \rightarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vdash }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \in }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathsf{fv}\! }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \leadsto }{}{}{}{}}

\newcommand{\ottformula}{
\ottrulehead{\ottnt{formula}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{judgement}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{is\_value} \, \ottnt{v}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathsf{uniq} \Gamma }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{x}  \ottsym{:}  \ottnt{T} \, \in \, \Gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{X}  \ottsym{<:}  \ottnt{T} \, \in \, \Gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{x} \, \ottkw{notin} \, \mathsf{fv}\! \, \ottnt{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{x} \, \ottkw{notin} \, \ottkw{dom} \, \Gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{X} \, \ottkw{notin} \, \ottkw{dom} \, \Gamma}{}{}{}{}}

\newcommand{\ottWFTyp}{
\ottrulehead{\ottnt{WFTyp}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\Gamma  \vdash  \ottnt{T}}{}{}{}{\ottcom{Well-Formed Type rules}}}

\newcommand{\ottWFEnv}{
\ottrulehead{\ottnt{WFEnv}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\vdash  \Gamma}{}{}{}{\ottcom{Well-Formed Environment rules}}}

\newcommand{\ottJSubTyping}{
\ottrulehead{\ottnt{JSubTyping}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\Gamma  \vdash  \ottnt{T_{{\mathrm{1}}}}  \ottsym{<:}  \ottnt{T_{{\mathrm{2}}}}}{}{}{}{\ottcom{Subtyping rules}}}

\newcommand{\ottJTyping}{
\ottrulehead{\ottnt{JTyping}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\Gamma  \vdash  \ottnt{e}  \ottsym{:}  \ottnt{T}}{}{}{}{\ottcom{Typing rules}}}

\newcommand{\ottJEval}{
\ottrulehead{\ottnt{JEval}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{e}  \longrightarrow  \ottnt{e'}}{}{}{}{\ottcom{Small-step operational semantics}}}

\newcommand{\ottjudgement}{
\ottrulehead{\ottnt{judgement}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{WFTyp}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{WFEnv}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JSubTyping}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JTyping}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JEval}}{}{}{}{}}

\newcommand{\ottuserXXsyntax}{
\ottrulehead{\ottnt{user\_syntax}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottmv{typevar}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{termvar}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{typ}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{exp}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{binding}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{ctx}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{terminals}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{formula}}{}{}{}{}}

\newcommand{\ottgrammar}{\ottgrammartabular{
\otttyp\ottinterrule
\ottexp\ottinterrule
\ottbinding\ottinterrule
\ottctx\ottinterrule
\ottterminals\ottinterrule
\ottformula\ottinterrule
\ottWFTyp\ottinterrule
\ottWFEnv\ottinterrule
\ottJSubTyping\ottinterrule
\ottJTyping\ottinterrule
\ottJEval\ottinterrule
\ottjudgement\ottinterrule
\ottuserXXsyntax\ottafterlastrule
}}

% defnss
% defns WFTyp
%% defn wf_typ
\newcommand{\ottdrulewfXXtypXXtop}[1]{\ottdrule[#1]{%
}{
\Gamma  \vdash  \ottkw{Top}}{%
{\ottdrulename{wf\_typ\_top}}{}%
}}


\newcommand{\ottdrulewfXXtypXXtrue}[1]{\ottdrule[#1]{%
}{
\Gamma  \vdash  \ottkw{True}}{%
{\ottdrulename{wf\_typ\_true}}{}%
}}


\newcommand{\ottdrulewfXXtypXXfalse}[1]{\ottdrule[#1]{%
}{
\Gamma  \vdash  \ottkw{False}}{%
{\ottdrulename{wf\_typ\_false}}{}%
}}


\newcommand{\ottdrulewfXXtypXXarrow}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{T_{{\mathrm{1}}}}}%
\ottpremise{\Gamma  \vdash  \ottnt{T_{{\mathrm{2}}}}}%
}{
\Gamma  \vdash  \ottnt{T_{{\mathrm{1}}}}  \rightarrow  \ottnt{T_{{\mathrm{2}}}}}{%
{\ottdrulename{wf\_typ\_arrow}}{}%
}}


\newcommand{\ottdrulewfXXtypXXforall}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{T_{{\mathrm{1}}}}}%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{X}  \ottsym{<:}  \ottnt{T_{{\mathrm{1}}}}  \vdash  \ottnt{T_{{\mathrm{2}}}}}%
}{
\Gamma  \vdash  \ottkw{Forall} \, \ottmv{X}  \ottsym{<:}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{.}  \ottnt{T_{{\mathrm{2}}}}}{%
{\ottdrulename{wf\_typ\_forall}}{}%
}}


\newcommand{\ottdrulewfXXtypXXunion}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{T_{{\mathrm{1}}}}}%
\ottpremise{\Gamma  \vdash  \ottnt{T_{{\mathrm{2}}}}}%
}{
\Gamma  \vdash  \ottnt{T_{{\mathrm{1}}}} \, \ottkw{Or} \, \ottnt{T_{{\mathrm{2}}}}}{%
{\ottdrulename{wf\_typ\_union}}{}%
}}


\newcommand{\ottdrulewfXXtypXXvar}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{X}  \ottsym{<:}  \ottnt{T} \, \in \, \Gamma}%
}{
\Gamma  \vdash  \ottmv{X}}{%
{\ottdrulename{wf\_typ\_var}}{}%
}}

\newcommand{\ottdefnwfXXtyp}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vdash  \ottnt{T}$}{\ottcom{Well-Formed Type rules}}
\ottusedrule{\ottdrulewfXXtypXXtop{}}
\ottusedrule{\ottdrulewfXXtypXXtrue{}}
\ottusedrule{\ottdrulewfXXtypXXfalse{}}
\ottusedrule{\ottdrulewfXXtypXXarrow{}}
\ottusedrule{\ottdrulewfXXtypXXforall{}}
\ottusedrule{\ottdrulewfXXtypXXunion{}}
\ottusedrule{\ottdrulewfXXtypXXvar{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsWFTyp}{
\ottdefnwfXXtyp{}}

% defns WFEnv
%% defn wf_env
\newcommand{\ottdrulewfXXenvXXempty}[1]{\ottdrule[#1]{%
}{
\vdash   \bullet }{%
{\ottdrulename{wf\_env\_empty}}{}%
}}


\newcommand{\ottdrulewfXXenvXXsub}[1]{\ottdrule[#1]{%
\ottpremise{\vdash  \Gamma}%
\ottpremise{\Gamma  \vdash  \ottnt{T}}%
\ottpremise{\ottmv{X} \, \ottkw{notin} \, \ottkw{dom} \, \Gamma}%
}{
\vdash  \Gamma  \ottsym{,}  \ottmv{X}  \ottsym{<:}  \ottnt{T}}{%
{\ottdrulename{wf\_env\_sub}}{}%
}}


\newcommand{\ottdrulewfXXenvXXtyp}[1]{\ottdrule[#1]{%
\ottpremise{\vdash  \Gamma}%
\ottpremise{\Gamma  \vdash  \ottnt{T}}%
\ottpremise{\ottmv{x} \, \ottkw{notin} \, \ottkw{dom} \, \Gamma}%
}{
\vdash  \Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{T}}{%
{\ottdrulename{wf\_env\_typ}}{}%
}}

\newcommand{\ottdefnwfXXenv}[1]{\begin{ottdefnblock}[#1]{$\vdash  \Gamma$}{\ottcom{Well-Formed Environment rules}}
\ottusedrule{\ottdrulewfXXenvXXempty{}}
\ottusedrule{\ottdrulewfXXenvXXsub{}}
\ottusedrule{\ottdrulewfXXenvXXtyp{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsWFEnv}{
\ottdefnwfXXenv{}}

% defns JSubTyping
%% defn sub
\newcommand{\ottdrulesubXXtop}[1]{\ottdrule[#1]{%
\ottpremise{\vdash  \Gamma}%
\ottpremise{\Gamma  \vdash  \ottnt{T}}%
}{
\Gamma  \vdash  \ottnt{T}  \ottsym{<:}  \ottkw{Top}}{%
{\ottdrulename{sub\_top}}{}%
}}


\newcommand{\ottdrulesubXXreflXXtrue}[1]{\ottdrule[#1]{%
\ottpremise{\vdash  \Gamma}%
}{
\Gamma  \vdash  \ottkw{True}  \ottsym{<:}  \ottkw{True}}{%
{\ottdrulename{sub\_refl\_true}}{}%
}}


\newcommand{\ottdrulesubXXreflXXfalse}[1]{\ottdrule[#1]{%
\ottpremise{\vdash  \Gamma}%
}{
\Gamma  \vdash  \ottkw{False}  \ottsym{<:}  \ottkw{False}}{%
{\ottdrulename{sub\_refl\_false}}{}%
}}


\newcommand{\ottdrulesubXXreflXXtvar}[1]{\ottdrule[#1]{%
\ottpremise{\vdash  \Gamma}%
\ottpremise{\Gamma  \vdash  \ottmv{X}}%
}{
\Gamma  \vdash  \ottmv{X}  \ottsym{<:}  \ottmv{X}}{%
{\ottdrulename{sub\_refl\_tvar}}{}%
}}


\newcommand{\ottdrulesubXXtransXXtvar}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{X}  \ottsym{<:}  \ottnt{T_{{\mathrm{1}}}} \, \in \, \Gamma}%
\ottpremise{\Gamma  \vdash  \ottnt{T_{{\mathrm{1}}}}  \ottsym{<:}  \ottnt{T_{{\mathrm{2}}}}}%
}{
\Gamma  \vdash  \ottmv{X}  \ottsym{<:}  \ottnt{T_{{\mathrm{2}}}}}{%
{\ottdrulename{sub\_trans\_tvar}}{}%
}}


\newcommand{\ottdrulesubXXarrow}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{T_{{\mathrm{1}}}}  \ottsym{<:}  \ottnt{S_{{\mathrm{1}}}}}%
\ottpremise{\Gamma  \vdash  \ottnt{T_{{\mathrm{2}}}}  \ottsym{<:}  \ottnt{S_{{\mathrm{2}}}}}%
}{
\Gamma  \vdash  \ottnt{S_{{\mathrm{1}}}}  \rightarrow  \ottnt{S_{{\mathrm{2}}}}  \ottsym{<:}  \ottnt{T_{{\mathrm{1}}}}  \rightarrow  \ottnt{T_{{\mathrm{2}}}}}{%
{\ottdrulename{sub\_arrow}}{}%
}}


\newcommand{\ottdrulesubXXforall}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{T_{{\mathrm{1}}}}  \ottsym{<:}  \ottnt{S_{{\mathrm{1}}}}}%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{X}  \ottsym{<:}  \ottnt{T_{{\mathrm{1}}}}  \vdash  \ottnt{S_{{\mathrm{2}}}}  \ottsym{<:}  \ottnt{T_{{\mathrm{2}}}}}%
}{
\Gamma  \vdash  \ottkw{Forall} \, \ottmv{X}  \ottsym{<:}  \ottnt{S_{{\mathrm{1}}}}  \ottsym{.}  \ottnt{S_{{\mathrm{2}}}}  \ottsym{<:}  \ottkw{Forall} \, \ottmv{X}  \ottsym{<:}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{.}  \ottnt{T_{{\mathrm{2}}}}}{%
{\ottdrulename{sub\_forall}}{}%
}}


\newcommand{\ottdrulesubXXunionXXl}[1]{\ottdrule[#1]{%
\ottpremise{\vdash  \Gamma}%
\ottpremise{\Gamma  \vdash  \ottnt{T_{{\mathrm{2}}}}}%
\ottpremise{\Gamma  \vdash  \ottnt{S}  \ottsym{<:}  \ottnt{T_{{\mathrm{1}}}}}%
}{
\Gamma  \vdash  \ottnt{S} \, \ottkw{Or} \, \ottnt{T_{{\mathrm{2}}}}  \ottsym{<:}  \ottnt{T_{{\mathrm{1}}}} \, \ottkw{Or} \, \ottnt{T_{{\mathrm{2}}}}}{%
{\ottdrulename{sub\_union\_l}}{}%
}}


\newcommand{\ottdrulesubXXunionXXr}[1]{\ottdrule[#1]{%
\ottpremise{\vdash  \Gamma}%
\ottpremise{\Gamma  \vdash  \ottnt{T_{{\mathrm{1}}}}}%
\ottpremise{\Gamma  \vdash  \ottnt{S}  \ottsym{<:}  \ottnt{T_{{\mathrm{2}}}}}%
}{
\Gamma  \vdash  \ottnt{T_{{\mathrm{1}}}} \, \ottkw{Or} \, \ottnt{S}  \ottsym{<:}  \ottnt{T_{{\mathrm{1}}}} \, \ottkw{Or} \, \ottnt{T_{{\mathrm{2}}}}}{%
{\ottdrulename{sub\_union\_r}}{}%
}}


\newcommand{\ottdrulesubXXunionXXm}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{S_{{\mathrm{1}}}}  \ottsym{<:}  \ottnt{T}}%
\ottpremise{\Gamma  \vdash  \ottnt{S_{{\mathrm{2}}}}  \ottsym{<:}  \ottnt{T}}%
}{
\Gamma  \vdash  \ottnt{S_{{\mathrm{1}}}} \, \ottkw{Or} \, \ottnt{S_{{\mathrm{2}}}}  \ottsym{<:}  \ottnt{T}}{%
{\ottdrulename{sub\_union\_m}}{}%
}}

\newcommand{\ottdefnsub}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vdash  \ottnt{T_{{\mathrm{1}}}}  \ottsym{<:}  \ottnt{T_{{\mathrm{2}}}}$}{\ottcom{Subtyping rules}}
\ottusedrule{\ottdrulesubXXtop{}}
\ottusedrule{\ottdrulesubXXreflXXtrue{}}
\ottusedrule{\ottdrulesubXXreflXXfalse{}}
\ottusedrule{\ottdrulesubXXreflXXtvar{}}
\ottusedrule{\ottdrulesubXXtransXXtvar{}}
\ottusedrule{\ottdrulesubXXarrow{}}
\ottusedrule{\ottdrulesubXXforall{}}
\ottusedrule{\ottdrulesubXXunionXXl{}}
\ottusedrule{\ottdrulesubXXunionXXr{}}
\ottusedrule{\ottdrulesubXXunionXXm{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJSubTyping}{
\ottdefnsub{}}

% defns JTyping
%% defn typing
\newcommand{\ottdruletypingXXvar}[1]{\ottdrule[#1]{%
\ottpremise{\vdash  \Gamma}%
\ottpremise{\ottmv{x}  \ottsym{:}  \ottnt{T} \, \in \, \Gamma}%
}{
\Gamma  \vdash  \ottmv{x}  \ottsym{:}  \ottnt{T}}{%
{\ottdrulename{typing\_var}}{}%
}}


\newcommand{\ottdruletypingXXabs}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{T_{{\mathrm{1}}}}  \vdash  \ottnt{e}  \ottsym{:}  \ottnt{T_{{\mathrm{2}}}}}%
}{
\Gamma  \vdash   \lambda \ottmv{x} . \ottnt{e}   \ottsym{:}  \ottnt{T_{{\mathrm{1}}}}  \rightarrow  \ottnt{T_{{\mathrm{2}}}}}{%
{\ottdrulename{typing\_abs}}{}%
}}


\newcommand{\ottdruletypingXXapp}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{T_{{\mathrm{1}}}}  \rightarrow  \ottnt{T_{{\mathrm{2}}}}}%
\ottpremise{\Gamma  \vdash  \ottnt{e_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{T_{{\mathrm{1}}}}}%
}{
\Gamma  \vdash  \ottnt{e_{{\mathrm{1}}}} \, \ottnt{e_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{T_{{\mathrm{2}}}}}{%
{\ottdrulename{typing\_app}}{}%
}}


\newcommand{\ottdruletypingXXtabs}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{X}  \ottsym{<:}  \ottnt{T_{{\mathrm{1}}}}  \vdash  \ottnt{e}  \ottsym{:}  \ottnt{T_{{\mathrm{2}}}}}%
}{
\Gamma  \vdash  \lambda  \ottmv{X}  \ottsym{<:}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{.}  \ottnt{e}  \ottsym{:}  \ottkw{Forall} \, \ottmv{X}  \ottsym{<:}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{.}  \ottnt{T_{{\mathrm{2}}}}}{%
{\ottdrulename{typing\_tabs}}{}%
}}


\newcommand{\ottdruletypingXXtapp}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e}  \ottsym{:}  \ottkw{Forall} \, \ottmv{X}  \ottsym{<:}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{.}  \ottnt{T_{{\mathrm{2}}}}}%
\ottpremise{\Gamma  \vdash  \ottnt{S}  \ottsym{<:}  \ottnt{T_{{\mathrm{1}}}}}%
}{
\Gamma  \vdash  \ottnt{e}  \ottsym{[}  \ottnt{S}  \ottsym{]}  \ottsym{:}  \ottnt{T_{{\mathrm{2}}}}  \ottsym{[}  \ottmv{X}  \leadsto  \ottnt{S}  \ottsym{]}}{%
{\ottdrulename{typing\_tapp}}{}%
}}


\newcommand{\ottdruletypingXXsub}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e}  \ottsym{:}  \ottnt{S}}%
\ottpremise{\Gamma  \vdash  \ottnt{S}  \ottsym{<:}  \ottnt{T}}%
}{
\Gamma  \vdash  \ottnt{e}  \ottsym{:}  \ottnt{T}}{%
{\ottdrulename{typing\_sub}}{}%
}}


\newcommand{\ottdruletypingXXtrue}[1]{\ottdrule[#1]{%
\ottpremise{\vdash  \Gamma}%
}{
\Gamma  \vdash  \ottkw{true}  \ottsym{:}  \ottkw{True}}{%
{\ottdrulename{typing\_true}}{}%
}}


\newcommand{\ottdruletypingXXfalse}[1]{\ottdrule[#1]{%
\ottpremise{\vdash  \Gamma}%
}{
\Gamma  \vdash  \ottkw{false}  \ottsym{:}  \ottkw{False}}{%
{\ottdrulename{typing\_false}}{}%
}}


\newcommand{\ottdruletypingXXeq}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{T_{{\mathrm{1}}}}}%
\ottpremise{\Gamma  \vdash  \ottnt{T_{{\mathrm{2}}}}}%
\ottpremise{\Gamma  \vdash  \ottnt{e_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{T_{{\mathrm{1}}}}}%
\ottpremise{\Gamma  \vdash  \ottnt{e_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{T_{{\mathrm{2}}}}}%
}{
\Gamma  \vdash  \ottnt{e_{{\mathrm{1}}}}  \ottsym{==}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{:}  \ottkw{True} \, \ottkw{Or} \, \ottkw{False}}{%
{\ottdrulename{typing\_eq}}{}%
}}


\newcommand{\ottdruletypingXXand}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e_{{\mathrm{1}}}}  \ottsym{:}  \ottkw{True} \, \ottkw{Or} \, \ottkw{False}}%
\ottpremise{\Gamma  \vdash  \ottnt{e_{{\mathrm{2}}}}  \ottsym{:}  \ottkw{True} \, \ottkw{Or} \, \ottkw{False}}%
}{
\Gamma  \vdash  \ottnt{e_{{\mathrm{1}}}} \, \ottkw{and} \, \ottnt{e_{{\mathrm{2}}}}  \ottsym{:}  \ottkw{True} \, \ottkw{Or} \, \ottkw{False}}{%
{\ottdrulename{typing\_and}}{}%
}}

\newcommand{\ottdefntyping}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vdash  \ottnt{e}  \ottsym{:}  \ottnt{T}$}{\ottcom{Typing rules}}
\ottusedrule{\ottdruletypingXXvar{}}
\ottusedrule{\ottdruletypingXXabs{}}
\ottusedrule{\ottdruletypingXXapp{}}
\ottusedrule{\ottdruletypingXXtabs{}}
\ottusedrule{\ottdruletypingXXtapp{}}
\ottusedrule{\ottdruletypingXXsub{}}
\ottusedrule{\ottdruletypingXXtrue{}}
\ottusedrule{\ottdruletypingXXfalse{}}
\ottusedrule{\ottdruletypingXXeq{}}
\ottusedrule{\ottdruletypingXXand{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJTyping}{
\ottdefntyping{}}

% defns JEval
%% defn red
\newcommand{\ottdruleredXXappOne}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{e_{{\mathrm{1}}}}  \longrightarrow  \ottnt{e'_{{\mathrm{1}}}}}%
}{
\ottnt{e_{{\mathrm{1}}}} \, \ottnt{e_{{\mathrm{2}}}}  \longrightarrow  \ottnt{e'_{{\mathrm{1}}}} \, \ottnt{e_{{\mathrm{2}}}}}{%
{\ottdrulename{red\_app1}}{}%
}}


\newcommand{\ottdruleredXXappTwo}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{e_{{\mathrm{2}}}}  \longrightarrow  \ottnt{e'_{{\mathrm{2}}}}}%
}{
\ottnt{v_{{\mathrm{1}}}} \, \ottnt{e_{{\mathrm{2}}}}  \longrightarrow  \ottnt{v_{{\mathrm{1}}}} \, \ottnt{e'_{{\mathrm{2}}}}}{%
{\ottdrulename{red\_app2}}{}%
}}


\newcommand{\ottdruleredXXappXXabs}[1]{\ottdrule[#1]{%
}{
\ottsym{(}   \lambda \ottmv{x} . \ottnt{e_{{\mathrm{1}}}}   \ottsym{)} \, \ottnt{v_{{\mathrm{2}}}}  \longrightarrow  \ottnt{e_{{\mathrm{1}}}}  \ottsym{[}  \ottmv{x}  \leadsto  \ottnt{v_{{\mathrm{2}}}}  \ottsym{]}}{%
{\ottdrulename{red\_app\_abs}}{}%
}}


\newcommand{\ottdruleredXXtapp}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{e}  \longrightarrow  \ottnt{e'}}%
}{
\ottnt{e}  \ottsym{[}  \ottnt{T}  \ottsym{]}  \longrightarrow  \ottnt{e'}  \ottsym{[}  \ottnt{T}  \ottsym{]}}{%
{\ottdrulename{red\_tapp}}{}%
}}


\newcommand{\ottdruleredXXtappXXtabs}[1]{\ottdrule[#1]{%
}{
\ottsym{(}  \lambda  \ottmv{X}  \ottsym{<:}  \ottnt{S}  \ottsym{.}  \ottnt{e}  \ottsym{)}  \ottsym{[}  \ottnt{T}  \ottsym{]}  \longrightarrow  \ottnt{e_{{\mathrm{1}}}}  \ottsym{[}  \ottmv{X}  \leadsto  \ottnt{T}  \ottsym{]}}{%
{\ottdrulename{red\_tapp\_tabs}}{}%
}}


\newcommand{\ottdruleredXXifXXtrue}[1]{\ottdrule[#1]{%
}{
\ottkw{if} \, \ottkw{true} \, \ottkw{then} \, \ottnt{e_{{\mathrm{1}}}} \, \ottkw{else} \, \ottnt{e_{{\mathrm{2}}}}  \longrightarrow  \ottnt{e_{{\mathrm{1}}}}}{%
{\ottdrulename{red\_if\_true}}{}%
}}


\newcommand{\ottdruleredXXifXXfalse}[1]{\ottdrule[#1]{%
}{
\ottkw{if} \, \ottkw{false} \, \ottkw{then} \, \ottnt{e_{{\mathrm{1}}}} \, \ottkw{else} \, \ottnt{e_{{\mathrm{2}}}}  \longrightarrow  \ottnt{e_{{\mathrm{2}}}}}{%
{\ottdrulename{red\_if\_false}}{}%
}}


\newcommand{\ottdruleredXXif}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{e}  \longrightarrow  \ottnt{e'}}%
}{
\ottkw{if} \, \ottnt{e} \, \ottkw{then} \, \ottnt{e_{{\mathrm{1}}}} \, \ottkw{else} \, \ottnt{e_{{\mathrm{2}}}}  \longrightarrow  \ottkw{if} \, \ottnt{e'} \, \ottkw{then} \, \ottnt{e_{{\mathrm{1}}}} \, \ottkw{else} \, \ottnt{e_{{\mathrm{2}}}}}{%
{\ottdrulename{red\_if}}{}%
}}


\newcommand{\ottdruleredXXeql}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{e_{{\mathrm{1}}}}  \longrightarrow  \ottnt{e'_{{\mathrm{1}}}}}%
}{
\ottnt{e_{{\mathrm{1}}}}  \ottsym{==}  \ottnt{e_{{\mathrm{2}}}}  \longrightarrow  \ottnt{e'_{{\mathrm{1}}}}  \ottsym{==}  \ottnt{e_{{\mathrm{2}}}}}{%
{\ottdrulename{red\_eql}}{}%
}}


\newcommand{\ottdruleredXXeqr}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{e_{{\mathrm{2}}}}  \longrightarrow  \ottnt{e'_{{\mathrm{2}}}}}%
}{
\ottnt{v_{{\mathrm{1}}}}  \ottsym{==}  \ottnt{e_{{\mathrm{2}}}}  \longrightarrow  \ottnt{v_{{\mathrm{1}}}}  \ottsym{==}  \ottnt{e'_{{\mathrm{2}}}}}{%
{\ottdrulename{red\_eqr}}{}%
}}


\newcommand{\ottdruleredXXeq}[1]{\ottdrule[#1]{%
}{
\ottnt{v_{{\mathrm{1}}}}  \ottsym{==}  \ottnt{v_{{\mathrm{2}}}}  \longrightarrow  \ottkw{true}}{%
{\ottdrulename{red\_eq}}{}%
}}


\newcommand{\ottdruleredXXandl}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{e_{{\mathrm{1}}}}  \longrightarrow  \ottnt{e'_{{\mathrm{1}}}}}%
}{
\ottnt{e_{{\mathrm{1}}}} \, \ottkw{and} \, \ottnt{e_{{\mathrm{2}}}}  \longrightarrow  \ottnt{e'_{{\mathrm{1}}}} \, \ottkw{and} \, \ottnt{e_{{\mathrm{2}}}}}{%
{\ottdrulename{red\_andl}}{}%
}}


\newcommand{\ottdruleredXXandr}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{e_{{\mathrm{2}}}}  \longrightarrow  \ottnt{e'_{{\mathrm{2}}}}}%
}{
\ottnt{v_{{\mathrm{1}}}} \, \ottkw{and} \, \ottnt{e_{{\mathrm{2}}}}  \longrightarrow  \ottnt{v_{{\mathrm{1}}}} \, \ottkw{and} \, \ottnt{e'_{{\mathrm{2}}}}}{%
{\ottdrulename{red\_andr}}{}%
}}


\newcommand{\ottdruleredXXandXXfalseXXl}[1]{\ottdrule[#1]{%
}{
\ottkw{false} \, \ottkw{and} \, \ottnt{v_{{\mathrm{2}}}}  \longrightarrow  \ottkw{false}}{%
{\ottdrulename{red\_and\_false\_l}}{}%
}}


\newcommand{\ottdruleredXXandXXfalseXXr}[1]{\ottdrule[#1]{%
}{
\ottnt{v_{{\mathrm{1}}}} \, \ottkw{and} \, \ottkw{false}  \longrightarrow  \ottkw{false}}{%
{\ottdrulename{red\_and\_false\_r}}{}%
}}


\newcommand{\ottdruleredXXandXXtrue}[1]{\ottdrule[#1]{%
}{
\ottkw{true} \, \ottkw{and} \, \ottkw{true}  \longrightarrow  \ottkw{true}}{%
{\ottdrulename{red\_and\_true}}{}%
}}

\newcommand{\ottdefnred}[1]{\begin{ottdefnblock}[#1]{$\ottnt{e}  \longrightarrow  \ottnt{e'}$}{\ottcom{Small-step operational semantics}}
\ottusedrule{\ottdruleredXXappOne{}}
\ottusedrule{\ottdruleredXXappTwo{}}
\ottusedrule{\ottdruleredXXappXXabs{}}
\ottusedrule{\ottdruleredXXtapp{}}
\ottusedrule{\ottdruleredXXtappXXtabs{}}
\ottusedrule{\ottdruleredXXifXXtrue{}}
\ottusedrule{\ottdruleredXXifXXfalse{}}
\ottusedrule{\ottdruleredXXif{}}
\ottusedrule{\ottdruleredXXeql{}}
\ottusedrule{\ottdruleredXXeqr{}}
\ottusedrule{\ottdruleredXXeq{}}
\ottusedrule{\ottdruleredXXandl{}}
\ottusedrule{\ottdruleredXXandr{}}
\ottusedrule{\ottdruleredXXandXXfalseXXl{}}
\ottusedrule{\ottdruleredXXandXXfalseXXr{}}
\ottusedrule{\ottdruleredXXandXXtrue{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJEval}{
\ottdefnred{}}

\newcommand{\ottdefnss}{
\ottdefnsWFTyp
\ottdefnsWFEnv
\ottdefnsJSubTyping
\ottdefnsJTyping
\ottdefnsJEval
}

\newcommand{\ottall}{\ottmetavars\\[0pt]
\ottgrammar\\[5.0mm]
\ottdefnss}

\begin{document}
\ottall

\begin{verbatim}
Definition rules:        46 good    0 bad
Definition rule clauses: 105 good    0 bad
\end{verbatim}
\end{document}
